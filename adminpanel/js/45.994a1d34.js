(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{a068:function(e,t,s){"use strict";s.r(t);s("c7fe"),s("3119"),s("8da0"),s("b5bb"),s("a2b7");var a=s("635f"),i=s("4360"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"full-height full-width"},[s("q-scroll-area",{staticClass:"full-height full-width"},[s("div",{staticClass:"q-pa-lg "},[s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.HEADING_SERVERS_SETTINGS",expression:"'MAILWEBCLIENT.HEADING_SERVERS_SETTINGS'"}],staticClass:"col text-h5"}),e.createMode?e._e():s("div",{staticClass:"col text-right"},[s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("MAILWEBCLIENT.ACTION_ADD_NEW_SERVER")},on:{click:e.addNewServer}})],1)]),e.createMode?e._e():s("div",{staticClass:"relative-position"},[e.servers.length>0?s("q-list",{staticClass:"rounded-borders q-mb-md",staticStyle:{overflow:"hidden"},attrs:{dense:"",bordered:"",separator:""}},e._l(e.servers,(function(t){return s("q-item",{key:t.id,class:e.currentServerId===t.id?"bg-grey-4":"bg-white",attrs:{clickable:""},on:{click:function(s){return e.route(t.id)}}},[s("q-item-section",[s("q-item-label",[e._v("\n                "+e._s(t.name)+"\n                "),t.tenantName?s("span",{staticClass:"text-grey-6"},[e._v(e._s(e.$t("MAILWEBCLIENT.LABEL_HINT_SERVERS_TENANTNAME",{TENANTNAME:t.tenantName})))]):e._e()])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{staticClass:"no-hover",attrs:{dense:"",flat:"","no-caps":"",color:"negative",label:e.$t("COREWEBCLIENT.ACTION_DELETE")},nativeOn:{click:function(s){return s.stopPropagation(),e.askDeleteServer(t.name,t.id,t.tenantId)}}})],1)],1)})),1):e._e(),e.showSearch||e.showPagination?s("div",{staticClass:"flex flex-left q-mb-lg"},[e.showSearch?s("q-input",{attrs:{rounded:"",outlined:"",dense:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.route.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-btn",{attrs:{dense:"",flat:"",ripple:!1,icon:"search"},on:{click:e.route}})]},proxy:!0}],null,!1,2860817800),model:{value:e.enteredSearch,callback:function(t){e.enteredSearch=t},expression:"enteredSearch"}}):e._e(),e.showPagination?s("q-pagination",{attrs:{flat:"","active-color":"primary",color:"grey-6",max:e.pagesCount},model:{value:e.selectedPage,callback:function(t){e.selectedPage=t},expression:"selectedPage"}}):e._e()],1):e._e(),0===e.servers.length&&e.loadingServers?s("div",{staticStyle:{height:"150px"}}):e._e(),0!==e.servers.length||e.loadingServers||""!==e.search?e._e():s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.INFO_NO_SERVERS",expression:"'MAILWEBCLIENT.INFO_NO_SERVERS'"}],staticClass:"text-caption"})],1),0!==e.servers.length||e.loadingServers||""===e.search?e._e():s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.INFO_NO_SERVERS_FOUND",expression:"'MAILWEBCLIENT.INFO_NO_SERVERS_FOUND'"}],staticClass:"text-caption"})],1)],1),e.showServerFields||e.createMode?s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",[e.createMode&&e.tenantOptions.length>1?s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_TENANT",expression:"'MAILWEBCLIENT.LABEL_TENANT'"}],staticClass:"col-2 q-my-sm q-pl-sm required-field"}),s("div",{staticClass:"col-5"},[s("q-select",{attrs:{outlined:"",dense:"","bg-color":"white","emit-value":"","map-options":"",options:e.tenantOptions},model:{value:e.selectedTenantId,callback:function(t){e.selectedTenantId=t},expression:"selectedTenantId"}})],1)]):e._e(),s("div",{staticClass:"row"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_DISPLAY_NAME",expression:"'MAILWEBCLIENT.LABEL_DISPLAY_NAME'"}],staticClass:"col-2 q-my-sm q-pl-sm required-field"}),s("div",{staticClass:"col-5"},[s("q-input",{ref:"serverName",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.serverName,callback:function(t){e.serverName=t},expression:"serverName"}})],1)]),s("div",{staticClass:"row q-mt-sm q-mb-lg"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-9"},[s("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_HINT_DISPLAY_NAME",expression:"'MAILWEBCLIENT.LABEL_HINT_DISPLAY_NAME'"}],attrs:{caption:""}})],1)]),e.allowEditDomainsInServer||!e.createMode?s("div",{staticClass:"row"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_DOMAINS",expression:"'MAILWEBCLIENT.LABEL_DOMAINS'"}],staticClass:"col-2"}),s("div",{staticClass:"col-3 textarea"},[s("q-input",{ref:"domains",attrs:{outlined:"",dense:"","bg-color":"white",type:"textarea",rows:"2",disable:!e.allowEditDomainsInServer},model:{value:e.domains,callback:function(t){e.domains=t},expression:"domains"}})],1)]):e._e(),e.allowEditDomainsInServer||!e.createMode?s("div",{staticClass:"row q-mt-sm q-mb-lg"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-9"},[e.allowEditDomainsInServer?s("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_HINT_DOMAINS",expression:"'MAILWEBCLIENT.LABEL_HINT_DOMAINS'"}],attrs:{caption:""}}):e._e(),e.allowEditDomainsInServer?s("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_HINT_DOMAINS_WILDCARD",expression:"'MAILWEBCLIENT.LABEL_HINT_DOMAINS_WILDCARD'"}],staticClass:"text-weight-bold q-mt-md",attrs:{caption:""}}):e._e(),e.allowEditDomainsInServer?e._e():s("q-item-label",{attrs:{caption:""},domProps:{innerHTML:e._s(e.$t("MAILWEBCLIENT.LABEL_HINT_DOMAINS_CANNOT_EDIT_HTML"))}})],1)]):e._e(),s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_IMAP_SERVER",expression:"'MAILWEBCLIENT.LABEL_IMAP_SERVER'"}],staticClass:"col-2 q-my-sm q-pl-sm required-field"}),s("div",{staticClass:"col-3"},[s("q-input",{ref:"imapServer",attrs:{outlined:"",dense:"","bg-color":"white"},on:{blur:e.fillUpSmtpServerFromImapServer},model:{value:e.imapServer,callback:function(t){e.imapServer=t},expression:"imapServer"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_PORT",expression:"'MAILWEBCLIENT.LABEL_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md  q-pl-sm required-field"}),s("div",{staticClass:"col-1"},[s("q-input",{ref:"imapPort",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.imapPort,callback:function(t){e.imapPort=t},expression:"imapPort"}})],1),s("div",{staticClass:"col-1 q-my-sm q-pl-md"},[s("q-checkbox",{attrs:{dense:"",label:"SSL"},model:{value:e.imapSsl,callback:function(t){e.imapSsl=t},expression:"imapSsl"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_SMTP_SERVER",expression:"'MAILWEBCLIENT.LABEL_SMTP_SERVER'"}],staticClass:"col-2 q-my-sm q-pl-sm required-field"}),s("div",{staticClass:"col-3"},[s("q-input",{ref:"smtpServer",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.smtpServer,callback:function(t){e.smtpServer=t},expression:"smtpServer"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_PORT",expression:"'MAILWEBCLIENT.LABEL_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md q-pl-sm required-field"}),s("div",{staticClass:"col-1"},[s("q-input",{ref:"smtpPort",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.smtpPort,callback:function(t){e.smtpPort=t},expression:"smtpPort"}})],1),s("div",{staticClass:"col-1 q-my-sm q-pl-md"},[s("q-checkbox",{attrs:{dense:"",label:e.$t("MAILWEBCLIENT.LABEL_SSL")},model:{value:e.smtpSsl,callback:function(t){e.smtpSsl=t},expression:"smtpSsl"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-6"},[s("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_SMTP_AUTHENTICATION",expression:"'MAILWEBCLIENT.LABEL_SMTP_AUTHENTICATION'"}]}),s("q-list",{attrs:{dense:""}},[s("q-item",{attrs:{"manual-focus":""}},[s("q-item-section",{staticClass:"q-pr-none"},[s("span",[s("q-radio",{attrs:{dense:"",val:e.smtpAuthTypeEnum.NoAuthentication,label:e.$t("MAILWEBCLIENT.LABEL_NO_AUTHENTICATION")},model:{value:e.smtpAuthentication,callback:function(t){e.smtpAuthentication=t},expression:"smtpAuthentication"}})],1)])],1),s("q-item",{attrs:{"manual-focus":""}},[s("q-item-section",{attrs:{avatar:""}},[s("span",[s("q-radio",{attrs:{dense:"",val:e.smtpAuthTypeEnum.UseSpecifiedCredentials,label:e.$t("MAILWEBCLIENT.LABEL_USE_SPECIFIED_CREDENTIALS")},model:{value:e.smtpAuthentication,callback:function(t){e.smtpAuthentication=t},expression:"smtpAuthentication"}})],1)]),s("q-item-section",[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",placeholder:e.$t("COREWEBCLIENT.LABEL_LOGIN")},model:{value:e.smtpLogin,callback:function(t){e.smtpLogin=t},expression:"smtpLogin"}})],1),s("q-item-section",[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",placeholder:e.$t("COREWEBCLIENT.LABEL_PASSWORD")},model:{value:e.smtpPassword,callback:function(t){e.smtpPassword=t},expression:"smtpPassword"}})],1)],1),s("q-item",{attrs:{"manual-focus":""}},[s("q-item-section",[s("span",[s("q-radio",{attrs:{dense:"",val:e.smtpAuthTypeEnum.UseUserCredentials,label:e.$t("MAILWEBCLIENT.LABEL_USE_USER_CREDENTIALS")},model:{value:e.smtpAuthentication,callback:function(t){e.smtpAuthentication=t},expression:"smtpAuthentication"}})],1)])],1)],1)],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-5"},[s("q-checkbox",{attrs:{dense:"",label:e.$t("MAILWEBCLIENT.LABEL_ENABLE_SIEVE")},model:{value:e.enableSieve,callback:function(t){e.enableSieve=t},expression:"enableSieve"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_SIEVE_PORT",expression:"'MAILWEBCLIENT.LABEL_SIEVE_PORT'"}],staticClass:"col-2 q-my-sm"}),s("div",{staticClass:"col-5"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.sievePort,callback:function(t){e.sievePort=t},expression:"sievePort"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-5"},[s("q-checkbox",{attrs:{dense:"",label:e.$t("MAILWEBCLIENT.LABEL_USE_THREADING")},model:{value:e.useThreading,callback:function(t){e.useThreading=t},expression:"useThreading"}})],1)]),s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-5"},[s("q-checkbox",{attrs:{dense:"",label:e.$t("MAILWEBCLIENT.LABEL_USE_FULL_EMAIL_ADDRESS_AS_LOGIN")},model:{value:e.useFullEmail,callback:function(t){e.useFullEmail=t},expression:"useFullEmail"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-5"},[s("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_HINT_USE_FULL_EMAIL_ADDRESS_AS_LOGIN",expression:"'MAILWEBCLIENT.LABEL_HINT_USE_FULL_EMAIL_ADDRESS_AS_LOGIN'"}],attrs:{caption:""}})],1)])])],1):e._e(),e.showServerFields||e.createMode?s("q-card",{staticClass:"card-edit-settings q-mt-md",attrs:{flat:"",bordered:""}},[s("q-card-section",[s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col-10"},[s("q-checkbox",{attrs:{dense:"",label:e.$t("MAILWEBCLIENT.LABEL_ADMIN_EXTERNAL_ACCESS_SERVERS")},model:{value:e.setExternalAccessServers,callback:function(t){e.setExternalAccessServers=t},expression:"setExternalAccessServers"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-10"},[s("q-item-label",{attrs:{caption:""},domProps:{innerHTML:e._s(e.$t("MAILWEBCLIENT.LABEL_HINT_ADMIN_EXTERNAL_ACCESS_SERVERS"))}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_IMAP_SERVER",expression:"'MAILWEBCLIENT.LABEL_IMAP_SERVER'"}],staticClass:"col-2 q-my-sm",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessImapServer,callback:function(t){e.externalAccessImapServer=t},expression:"externalAccessImapServer"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_PORT",expression:"'MAILWEBCLIENT.LABEL_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessImapPort,callback:function(t){e.externalAccessImapPort=t},expression:"externalAccessImapPort"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT",expression:"'MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessImapAlterPortModel,callback:function(t){e.externalAccessImapAlterPortModel=t},expression:"externalAccessImapAlterPortModel"}})],1),s("div",{staticClass:"col-1 q-my-sm q-pl-md"},[s("q-checkbox",{attrs:{outlined:"",dense:"",label:"SSL",disable:!e.setExternalAccessServers},model:{value:e.externalAccessImapUseSsl,callback:function(t){e.externalAccessImapUseSsl=t},expression:"externalAccessImapUseSsl"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_POP3_SERVER",expression:"'MAILWEBCLIENT.LABEL_POP3_SERVER'"}],staticClass:"col-2 q-my-sm",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessPop3Server,callback:function(t){e.externalAccessPop3Server=t},expression:"externalAccessPop3Server"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_PORT",expression:"'MAILWEBCLIENT.LABEL_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessPop3Port,callback:function(t){e.externalAccessPop3Port=t},expression:"externalAccessPop3Port"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT",expression:"'MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessPop3AlterPortModel,callback:function(t){e.externalAccessPop3AlterPortModel=t},expression:"externalAccessPop3AlterPortModel"}})],1),s("div",{staticClass:"col-1 q-my-sm q-pl-md"},[s("q-checkbox",{attrs:{outlined:"",dense:"",label:"SSL",disable:!e.setExternalAccessServers},model:{value:e.externalAccessPop3UseSsl,callback:function(t){e.externalAccessPop3UseSsl=t},expression:"externalAccessPop3UseSsl"}})],1)]),s("div",{staticClass:"row"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_SMTP_SERVER",expression:"'MAILWEBCLIENT.LABEL_SMTP_SERVER'"}],staticClass:"col-2 q-my-sm",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessSmtpServer,callback:function(t){e.externalAccessSmtpServer=t},expression:"externalAccessSmtpServer"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_PORT",expression:"'MAILWEBCLIENT.LABEL_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessSmtpPort,callback:function(t){e.externalAccessSmtpPort=t},expression:"externalAccessSmtpPort"}})],1),s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT",expression:"'MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT'"}],staticClass:"col-1 q-my-sm text-right q-pr-md",class:e.setExternalAccessServers?"":"disabled"}),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white",disable:!e.setExternalAccessServers},model:{value:e.externalAccessSmtpAlterPortModel,callback:function(t){e.externalAccessSmtpAlterPortModel=t},expression:"externalAccessSmtpAlterPortModel"}})],1),s("div",{staticClass:"col-1 q-my-sm q-pl-md"},[s("q-checkbox",{attrs:{outlined:"",dense:"",label:"SSL",disable:!e.setExternalAccessServers},model:{value:e.externalAccessSmtpUseSsl,callback:function(t){e.externalAccessSmtpUseSsl=t},expression:"externalAccessSmtpUseSsl"}})],1)])])],1):e._e(),e.oauthConnectorsData.length>0&&(e.showServerFields||e.createMode)?s("q-card",{staticClass:"card-edit-settings q-mt-md",attrs:{flat:"",bordered:""}},[s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-item-label",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.INFO_ADMIN_OAUTH",expression:"'MAILWEBCLIENT.INFO_ADMIN_OAUTH'"}]}),s("q-list",{attrs:{dense:""}},e._l(e.oauthConnectorsData,(function(t){return s("q-item",{key:t.type,attrs:{"manual-focus":""}},[s("q-item-section",{staticClass:"q-pr-none"},[s("span",[s("q-radio",{attrs:{dense:"",val:t.type,label:t.name},model:{value:e.oauthConnector,callback:function(t){e.oauthConnector=t},expression:"oauthConnector"}})],1)])],1)})),1)],1)])])],1):e._e(),e.showServerFields||e.createMode?s("div",{staticClass:"q-pt-md text-right"},[e.createMode?e._e():s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.save}}),e.createMode?s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_CREATE")},on:{click:e.create}}):e._e(),e.createMode?s("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"secondary",label:e.$t("COREWEBCLIENT.ACTION_CANCEL")},on:{click:e.cancelCreate}}):e._e()],1):e._e()],1),s("ConfirmDialog",{ref:"confirmDialog"})],1),s("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loadingServers||e.saving||e.creating}},[s("q-linear-progress",{attrs:{query:""}})],1)],1)},n=[],l=(s("21de"),s("f108"),s("21db"),s("4d9a"),s("90ee"),s("b771"),s("fb17"),s("b2f5")),c=s.n(l),o=s("4245"),m=s("21ac"),p=s("6bfe"),d=s("e539"),E=(s("6797"),s("9863")),v={getServers:function(e,t,s){return new Promise((function(a,i){d["a"].sendRequest({moduleName:"Mail",methodName:"GetServers",parameters:{Search:e,Offset:s*(t-1),Limit:s}}).then((function(i){if(c.a.isArray(null===i||void 0===i?void 0:i.Items)){var r=c.a.map(i.Items,(function(e){return new E["a"](e)})),n=p["a"].pInt(i.Count);a({servers:r,totalCount:n,search:e,page:t,limit:s})}else a({servers:[],totalCount:0,search:e,page:t,limit:s})}),(function(i){m["a"].showError(o["a"].getTextFromResponse(i)),a({servers:[],totalCount:0,search:e,page:t,limit:s})}))}))}},h=s("96ec"),u={name:"MailAdminSettings",components:{ConfirmDialog:h["a"]},data:function(){return{smtpAuthTypeEnum:a["a"].getSmtpAuthTypeEnum(),allowEditDomainsInServer:a["a"].getAllowEditDomainsInServer(),page:1,search:"",limit:10,servers:[],totalCount:0,loadingServers:!1,showSearch:!1,enteredSearch:"",selectedPage:1,currentServerId:0,currentServerTenantId:0,createMode:!1,showServerFields:!1,selectedTenantId:0,tenantOptions:[],serverName:"",domains:"",imapServer:"",imapPort:0,imapSsl:!1,smtpServer:"",smtpPort:0,smtpSsl:!1,smtpAuthentication:"0",smtpLogin:"",smtpPassword:"",enableSieve:!1,sievePort:0,useThreading:!1,useFullEmail:!1,setExternalAccessServers:!1,externalAccessImapServer:"",externalAccessImapPort:143,externalAccessImapAlterPort:"",externalAccessImapUseSsl:!1,externalAccessPop3Server:"",externalAccessPop3Port:110,externalAccessPop3AlterPort:"",externalAccessPop3UseSsl:!1,externalAccessSmtpServer:"",externalAccessSmtpPort:25,externalAccessSmtpAlterPort:"",externalAccessSmtpUseSsl:!1,oauthConnectorsData:[],oauthConnector:"",saving:!1,creating:!1}},computed:{showPagination:function(){return this.servers.length<this.totalCount},pagesCount:function(){return Math.ceil(this.totalCount/this.limit)},externalAccessImapAlterPortModel:{get:function(){return 0===this.externalAccessImapAlterPort?"":this.externalAccessImapAlterPort},set:function(e){this.externalAccessImapAlterPort=e}},externalAccessPop3AlterPortModel:{get:function(){return 0===this.externalAccessPop3AlterPort?"":this.externalAccessPop3AlterPort},set:function(e){this.externalAccessPop3AlterPort=e}},externalAccessSmtpAlterPortModel:{get:function(){return 0===this.externalAccessSmtpAlterPort?"":this.externalAccessSmtpAlterPort},set:function(e){this.externalAccessSmtpAlterPort=e}}},watch:{$route:function(e,t){this.parseRoute()},selectedPage:function(){this.selectedPage!==this.page&&this.route()},imapSsl:function(){this.imapSsl&&143===this.imapPort&&(this.imapPort=993),this.imapSsl||993!==this.imapPort||(this.imapPort=143),this.setExternalAccessServers||(this.externalAccessImapUseSsl=this.imapSsl)},smtpSsl:function(){this.smtpSsl&&25===this.smtpPort&&(this.smtpPort=465),this.smtpSsl||465!==this.smtpPort||(this.smtpPort=25),this.setExternalAccessServers||(this.externalAccessSmtpUseSsl=this.smtpSsl)},imapServer:function(e){this.setExternalAccessServers||(this.externalAccessImapServer=e)},imapPort:function(e){this.setExternalAccessServers||(this.externalAccessImapPort=e)},smtpServer:function(e){this.setExternalAccessServers||(this.externalAccessSmtpServer=e)},smtpPort:function(e){this.setExternalAccessServers||(this.externalAccessSmtpPort=e)},setExternalAccessServers:function(){this.setExternalAccessServers||(this.externalAccessImapServer=this.imapServer,this.externalAccessImapPort=this.imapPort,this.externalAccessImapUseSsl=this.imapSsl,this.externalAccessSmtpServer=this.smtpServer,this.externalAccessSmtpPort=this.smtpPort,this.externalAccessSmtpUseSsl=this.smtpSsl)}},beforeRouteLeave:function(e,t,s){this.doBeforeRouteLeave(e,t,s)},beforeRouteUpdate:function(e,t,s){this.doBeforeRouteLeave(e,t,s)},mounted:function(){this.saving=!1,this.creating=!1,this.populate();var e=this.$store.getters["tenants/getTenants"],t=[{label:"system-wide",value:0}];e.length>1&&e.forEach((function(e){t.push({label:e.name,value:e.id})})),this.tenantOptions=t,this.populateOauthConnectorsData(),this.parseRoute()},methods:{route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=""!==this.enteredSearch?"/search/"+this.enteredSearch:"",s=this.search!==this.enteredSearch?1:this.selectedPage,a=s>1?"/page/"+s:"",i=e>0?"/id/"+e:"",r="/system/mail-servers"+t+a+i;r!==this.$route.path&&this.$router.push(r)},parseRoute:function(){if("/system/mail-servers/create"===this.$route.path)this.createMode=!0,this.showServerFields=!1,this.populateServer();else{var e,t,s,a,i,r;this.createMode=!1;var n=p["a"].pString(null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.search),l=p["a"].pPositiveInt(null===(s=this.$route)||void 0===s||null===(a=s.params)||void 0===a?void 0:a.page);this.search===n&&this.page===l||(this.search=n,this.enteredSearch=n,this.page=l,this.selectedPage=l,this.populate());var c=p["a"].pNonNegativeInt(null===(i=this.$route)||void 0===i||null===(r=i.params)||void 0===r?void 0:r.id);this.currentServerId!==c&&(this.currentServerId=c,this.populateServer())}},populateOauthConnectorsData:function(){var e={oauthConnectorsData:[]};this.$eventBus.$emit("MailWebclient::GetOauthConnectorsData",e),this.oauthConnectorsData=c.a.isArray(e.oauthConnectorsData)?e.oauthConnectorsData.filter((function(e){return p["a"].isNonEmptyString(e.name)&&p["a"].isNonEmptyString(e.type)})):[],this.oauthConnectorsData.length>0&&this.oauthConnectorsData.unshift({name:this.$t("MAILWEBCLIENT.LABEL_ADMIN_OAUTH_NOTHING_SELECTED"),type:""})},populate:function(){var e=this;this.loadingServers=!0,v.getServers(this.search,this.page,this.limit).then((function(t){var s=t.servers,a=t.totalCount,i=t.page,r=t.search;i===e.page&&r===e.search&&(e.servers=s,e.totalCount=a,""===e.search&&(e.showSearch=a>e.limit),e.loadingServers=!1,0!==e.currentServerId&&e.populateServer())}))},populateServer:function(){var e=this;if(this.createMode)this.currentServerId=0,this.selectedTenantId=this.tenantOptions.length>1?this.tenantOptions[1].value:0,this.serverName="",this.domains="",this.imapServer="",this.imapPort=143,this.imapSsl=!1,this.smtpServer="",this.smtpPort=25,this.smtpSsl=!1,this.smtpAuthentication=this.smtpAuthTypeEnum.UseUserCredentials,this.smtpLogin="",this.smtpPassword="",this.enableSieve=!1,this.sievePort=4190,this.useThreading=!0,this.useFullEmail=!0,this.setExternalAccessServers=!1,this.externalAccessImapServer="",this.externalAccessImapPort=143,this.externalAccessImapAlterPort="",this.externalAccessImapUseSsl=!1,this.externalAccessPop3Server="",this.externalAccessPop3Port=110,this.externalAccessPop3AlterPort="",this.externalAccessPop3UseSsl=!1,this.externalAccessSmtpServer="",this.externalAccessSmtpPort=25,this.externalAccessSmtpAlterPort="",this.externalAccessSmtpUseSsl=!1,this.oauthConnector="";else{var t=c.a.find(this.servers,(function(t){return t.id===e.currentServerId}));this.showServerFields=!!t,this.showServerFields&&(this.currentServerTenantId=t.tenantId,this.serverName=t.name,this.domains=t.domains,this.imapServer=t.incomingServer,this.imapPort=t.incomingPort,this.imapSsl=t.incomingUseSsl,this.smtpServer=t.outgoingServer,this.smtpPort=t.outgoingPort,this.smtpSsl=t.outgoingUseSsl,this.smtpAuthentication=t.smtpAuthType,this.smtpLogin=t.smtpLogin,this.smtpPassword=t.smtpPassword,this.enableSieve=t.enableSieve,this.sievePort=t.sievePort,this.useThreading=t.enableThreading,this.useFullEmail=t.useFullEmailAddressAsLogin,this.setExternalAccessServers=t.setExternalAccessServers,this.externalAccessImapServer=t.externalAccessImapServer,this.externalAccessImapPort=t.externalAccessImapPort,this.externalAccessImapAlterPort=t.externalAccessImapAlterPort,this.externalAccessImapUseSsl=t.externalAccessImapUseSsl,this.externalAccessPop3Server=t.externalAccessPop3Server,this.externalAccessPop3Port=t.externalAccessPop3Port,this.externalAccessPop3AlterPort=t.externalAccessPop3AlterPort,this.externalAccessPop3UseSsl=t.externalAccessPop3UseSsl,this.externalAccessSmtpServer=t.externalAccessSmtpServer,this.externalAccessSmtpPort=t.externalAccessSmtpPort,this.externalAccessSmtpAlterPort=t.externalAccessSmtpAlterPort,this.externalAccessSmtpUseSsl=t.externalAccessSmtpUseSsl,this.oauthConnector=t.oauthType)}},fillUpSmtpServerFromImapServer:function(){c.a.isEmpty(this.smtpServer)&&(this.smtpServer=this.imapServer)},hasChanges:function(){if(this.createMode){var e=!1!==this.setExternalAccessServers;return!e&&this.setExternalAccessServers&&(e=""!==this.externalAccessImapServer||143!==this.externalAccessImapPort||""!==this.externalAccessImapAlterPort||!1!==this.externalAccessImapUseSsl||""!==this.externalAccessPop3Server||110!==this.externalAccessPop3Port||""!==this.externalAccessPop3AlterPort||!1!==this.externalAccessPop3UseSsl||""!==this.externalAccessSmtpServer||25!==this.externalAccessSmtpPort||""!==this.externalAccessSmtpAlterPort||!1!==this.externalAccessSmtpUseSsl),""!==this.serverName||""!==this.domains||""!==this.imapServer||143!==this.imapPort||!1!==this.imapSsl||""!==this.smtpServer||25!==this.smtpPort||!1!==this.smtpSsl||this.smtpAuthentication!==this.smtpAuthTypeEnum.UseUserCredentials||""!==this.smtpLogin||""!==this.smtpPassword||!1!==this.enableSieve||4190!==this.sievePort||!0!==this.useThreading||!0!==this.useFullEmail||!1!==this.setExternalAccessServers||e||""!==this.oauthConnector}var t=this.getServer(this.currentServerId);if(t){var s=t.setExternalAccessServers!==this.setExternalAccessServers;return!s&&this.setExternalAccessServers&&(s=t.externalAccessImapServer!==this.externalAccessImapServer||t.externalAccessImapPort!==this.externalAccessImapPort||t.externalAccessImapAlterPort!==this.externalAccessImapAlterPort||t.externalAccessImapUseSsl!==this.externalAccessImapUseSsl||t.externalAccessPop3Server!==this.externalAccessPop3Server||t.externalAccessPop3Port!==this.externalAccessPop3Port||t.externalAccessPop3AlterPort!==this.externalAccessPop3AlterPort||t.externalAccessPop3UseSsl!==this.externalAccessPop3UseSsl||t.externalAccessSmtpServer!==this.externalAccessSmtpServer||t.externalAccessSmtpPort!==this.externalAccessSmtpPort||t.externalAccessSmtpAlterPort!==this.externalAccessSmtpAlterPort,t.externalAccessSmtpUseSsl,this.externalAccessSmtpUseSsl),t.name!==this.serverName||t.incomingServer!==this.imapServer||t.incomingPort!==this.imapPort||t.incomingUseSsl!==this.imapSsl||t.outgoingServer!==this.smtpServer||t.outgoingPort!==this.smtpPort||t.outgoingUseSsl!==this.smtpSsl||t.domains!==this.domains||t.smtpAuthType!==this.smtpAuthentication||t.smtpLogin!==this.smtpLogin||t.smtpPassword!==this.smtpPassword||t.enableSieve!==this.enableSieve||t.sievePort!==this.sievePort||t.enableThreading!==this.useThreading||t.useFullEmailAddressAsLogin!==this.useFullEmail||s||t.oauthType!==this.oauthConnector}return!1},revertChanges:function(){this.populateServer()},getServer:function(e){return this.servers.find((function(t){return t.id===e}))},updateServer:function(e){var t=this.getServer(e.ServerId);t&&t.update(e)},getSaveParameters:function(){var e=this,t={Name:this.serverName,IncomingServer:this.imapServer,IncomingPort:this.imapPort,IncomingUseSsl:this.imapSsl,OutgoingServer:this.smtpServer,OutgoingPort:this.smtpPort,OutgoingUseSsl:this.smtpSsl,Domains:this.domains,SmtpAuthType:this.smtpAuthentication,SmtpLogin:this.smtpLogin,SmtpPassword:this.smtpPassword,EnableSieve:this.enableSieve,SievePort:this.sievePort,EnableThreading:this.useThreading,UseFullEmailAddressAsLogin:this.useFullEmail,SetExternalAccessServers:this.setExternalAccessServers,ExternalAccessImapServer:this.externalAccessImapServer,ExternalAccessImapPort:p["a"].pInt(this.externalAccessImapPort),ExternalAccessImapAlterPort:p["a"].pInt(this.externalAccessImapAlterPort),ExternalAccessImapUseSsl:p["a"].pBool(this.externalAccessImapUseSsl),ExternalAccessPop3Server:this.externalAccessPop3Server,ExternalAccessPop3Port:p["a"].pInt(this.externalAccessPop3Port),ExternalAccessPop3AlterPort:p["a"].pInt(this.externalAccessPop3AlterPort),ExternalAccessPop3UseSsl:p["a"].pBool(this.externalAccessPop3UseSsl),ExternalAccessSmtpServer:this.externalAccessSmtpServer,ExternalAccessSmtpPort:p["a"].pInt(this.externalAccessSmtpPort),ExternalAccessSmtpAlterPort:p["a"].pInt(this.externalAccessSmtpAlterPort),ExternalAccessSmtpUseSsl:p["a"].pBool(this.externalAccessSmtpUseSsl)},s=""!==this.oauthConnector,a=s?this.oauthConnectorsData.find((function(t){return t.type===e.oauthConnector})):null;return a?(t.OAuthEnable=!0,t.OAuthName=a.name,t.OAuthType=a.type,t.OAuthIconUrl=a.iconUrl):(t.OAuthEnable=!1,t.OAuthName="",t.OAuthType="",t.OAuthIconUrl=""),t},isDataValid:function(){var e,t,s="";return c.a.isEmpty(c.a.trim(this.serverName))?s="serverName":c.a.isEmpty(c.a.trim(this.imapServer))?s="imapServer":c.a.isEmpty(c.a.trim(this.imapPort))?s="imapPort":c.a.isEmpty(c.a.trim(this.smtpServer))?s="smtpServer":c.a.isEmpty(c.a.trim(this.smtpPort))&&(s="smtpPort"),!!c.a.isEmpty(s)||(c.a.isFunction(null===(e=this.$refs[s])||void 0===e||null===(t=e.$el)||void 0===t?void 0:t.focus)&&this.$refs[s].$el.focus(),m["a"].showError(this.$t("COREWEBCLIENT.ERROR_REQUIRED_FIELDS_EMPTY")),!1)},save:function(){var e=this;if(!this.saving&&this.isDataValid()){this.saving=!0;var t=c.a.extend(this.getSaveParameters(),{ServerId:this.currentServerId,TenantId:this.currentServerTenantId});d["a"].sendRequest({moduleName:"Mail",methodName:"UpdateServer",parameters:t}).then((function(s){e.saving=!1,!0===s?(e.updateServer(t),e.populateServer(),e.populate(),m["a"].showReport(e.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):m["a"].showError(e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(t){e.saving=!1,m["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},addNewServer:function(){this.$router.push("/system/mail-servers/create")},cancelCreate:function(){this.$router.push("/system/mail-servers")},create:function(){var e=this;if(!this.creating&&this.isDataValid()){this.creating=!0;var t=c.a.extend(this.getSaveParameters(),{TenantId:this.selectedTenantId});d["a"].sendRequest({moduleName:"Mail",methodName:"CreateServer",parameters:t}).then((function(t){e.creating=!1,c.a.isSafeInteger(t)?(e.populateServer(),e.populate(),e.$router.push("/system/mail-servers/id/"+t),m["a"].showReport(e.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):m["a"].showError(e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(t){e.creating=!1,m["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},askDeleteServer:function(e,t,s){var a,i;c.a.isFunction(null===this||void 0===this||null===(a=this.$refs)||void 0===a||null===(i=a.confirmDialog)||void 0===i?void 0:i.openDialog)&&this.$refs.confirmDialog.openDialog({title:e,message:this.$t("MAILWEBCLIENT.CONFIRM_REMOVE_SERVER"),okHandler:this.deleteServer.bind(this,t,s)})},deleteServer:function(e,t){var s=this;this.loadingServers=!0,d["a"].sendRequest({moduleName:"Mail",methodName:"DeleteServer",parameters:{ServerId:e,TenantId:t,DeletionConfirmedByAdmin:!0}}).then((function(e){s.loadingServers=!1,!0===e?s.servers.length>1||1===s.selectedPage?s.populate():(s.selectedPage-=1,s.route()):m["a"].showError(s.$t("MAILWEBCLIENT.ERROR_DELETE_MAIL_SERVER"))}),(function(e){s.loadingServers=!1,m["a"].showError(o["a"].getTextFromResponse(e,s.$t("MAILWEBCLIENT.ERROR_DELETE_MAIL_SERVER")))}))}}},S=u,A=s("2877"),L=s("4983"),I=s("9c40"),C=s("1c1c"),T=s("66e5"),x=s("4074"),N=s("0170"),g=s("27f9"),_=s("3b16"),b=s("f09f"),P=s("a370"),M=s("ddd8"),f=s("8f8e"),B=s("3786"),q=s("74f7"),R=s("6b1d"),w=s("eebe"),O=s.n(w),W=Object(A["a"])(S,r,n,!1,null,"6ab1d064",null),U=W.exports;O()(W,"components",{QScrollArea:L["a"],QBtn:I["a"],QList:C["a"],QItem:T["a"],QItemSection:x["a"],QItemLabel:N["a"],QInput:g["a"],QPagination:_["a"],QCard:b["a"],QCardSection:P["a"],QSelect:M["a"],QCheckbox:f["a"],QRadio:B["a"],QInnerLoading:q["a"],QLinearProgress:R["a"]});var D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-scroll-area",{staticClass:"full-height full-width"},[s("div",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.HEADING_SETTINGS_TAB",expression:"'MAILWEBCLIENT.HEADING_SETTINGS_TAB'"}],staticClass:"col text-h5"})]),s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",[s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col-2"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_TENANT_SPACE_LIMIT",expression:"'MAILWEBCLIENT.LABEL_TENANT_SPACE_LIMIT'"}],staticClass:"q-my-sm"})]),s("div",{staticClass:"col-4"},[s("div",{staticClass:"row"},[s("q-input",{staticClass:"col-5",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.tenantSpaceLimitMb,callback:function(t){e.tenantSpaceLimitMb=t},expression:"tenantSpaceLimitMb"}}),s("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1",staticStyle:{"margin-top":"10px"}})],1)])]),s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-8 q-mb-sm"},[s("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("MAILWEBCLIENT.HINT_TENANT_SPACE_LIMIT"))+"\n            ")])],1)]),e.allowChangeUserSpaceLimit?s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT",expression:"'MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT'"}],staticClass:"q-my-sm"})]),s("div",{staticClass:"col-4"},[s("div",{staticClass:"row"},[s("q-input",{staticClass:" col-5",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.userSpaceLimitMb,callback:function(t){e.userSpaceLimitMb=t},expression:"userSpaceLimitMb"}}),s("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1",staticStyle:{"margin-top":"10px"}})],1)])]):e._e(),e.allowChangeUserSpaceLimit?s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-8 q-mt-sm"},[s("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("MAILWEBCLIENT.HINT_USER_SPACE_LIMIT"))+"\n            ")])],1)]):e._e(),s("div",{staticClass:"row"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_ALLOCATED_TENANT_SPACE",expression:"'MAILWEBCLIENT.LABEL_ALLOCATED_TENANT_SPACE'"}],staticClass:"col-2"}),s("div",{staticClass:"col-4"},[s("span",[e._v(e._s(e.allocatedSpace))]),s("span",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-mx-sm q-pb-sm col-1"})])])])],1),s("div",{staticClass:"q-pt-md text-right"},[s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.save}})],1)],1),s("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.saving}},[s("q-linear-progress",{attrs:{query:""}})],1)],1)},y=[],$={name:"MailAdminSettingsPerTenant",data:function(){return{saving:!1,loading:!1,tenantSpaceLimitMb:"",userSpaceLimitMb:"",allocatedSpace:"",tenant:null,allowChangeUserSpaceLimit:!1}},computed:{tenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenants:function(){return this.$store.getters["tenants/getTenants"]}},watch:{allTenants:function(){this.populate()}},beforeRouteLeave:function(e,t,s){this.doBeforeRouteLeave(e,t,s)},mounted:function(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges:function(){var e;if(this.loading)return!1;var t=p["a"].pObject(null===(e=this.tenant)||void 0===e?void 0:e.completeData),s=t["MailWebclient::TenantSpaceLimitMb"],a=t["MailWebclient::UserSpaceLimitMb"];return p["a"].pInt(this.tenantSpaceLimitMb)!==s||this.allowChangeUserSpaceLimit&&p["a"].pInt(this.userSpaceLimitMb)!==a},revertChanges:function(){var e,t=p["a"].pObject(null===(e=this.tenant)||void 0===e?void 0:e.completeData);this.tenantSpaceLimitMb=t["MailWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=t["MailWebclient::UserSpaceLimitMb"]},populate:function(){var e=this.$store.getters["tenants/getTenant"](this.tenantId);e&&(void 0!==e.completeData["MailWebclient::TenantSpaceLimitMb"]?(this.loading=!1,this.tenant=e,this.tenantSpaceLimitMb=e.completeData["MailWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=e.completeData["MailWebclient::UserSpaceLimitMb"],this.allocatedSpace=e.completeData["MailWebclient::AllocatedSpaceMb"],this.allowChangeUserSpaceLimit=e.completeData["MailWebclient::AllowChangeUserSpaceLimit"]):this.getSettings())},save:function(){var e=this;if(!this.saving){this.saving=!0;var t={Type:"Tenant",TenantId:this.tenantId,UserSpaceLimitMb:p["a"].pInt(this.userSpaceLimitMb),TenantSpaceLimitMb:p["a"].pInt(this.tenantSpaceLimitMb)};d["a"].sendRequest({moduleName:"Mail",methodName:"UpdateEntitySpaceLimits",parameters:t}).then((function(s){if(e.saving=!1,!0===s){var a={"MailWebclient::UserSpaceLimitMb":t.UserSpaceLimitMb,"MailWebclient::TenantSpaceLimitMb":t.TenantSpaceLimitMb,"MailWebclient::AllocatedSpaceMb":e.allocatedSpace};e.$store.commit("tenants/setTenantCompleteData",{id:e.tenantId,data:a}),m["a"].showReport(e.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else m["a"].showError(e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(t){e.saving=!1,m["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings:function(){var e=this;this.loading=!0;var t={Type:"Tenant",TenantId:this.tenantId};d["a"].sendRequest({moduleName:"Mail",methodName:"GetEntitySpaceLimits",parameters:t}).then((function(t){if(e.loading=!1,t){var s={"MailWebclient::UserSpaceLimitMb":p["a"].pInt(t.UserSpaceLimitMb),"MailWebclient::TenantSpaceLimitMb":p["a"].pInt(t.TenantSpaceLimitMb),"MailWebclient::AllocatedSpaceMb":p["a"].pInt(t.AllocatedSpaceMb),"MailWebclient::AllowChangeUserSpaceLimit":p["a"].pBool(t.AllowChangeUserSpaceLimit)};e.$store.commit("tenants/setTenantCompleteData",{id:e.tenantId,data:s})}}),(function(e){m["a"].showError(o["a"].getTextFromResponse(e))}))}}},k=$,F=Object(A["a"])(k,D,y,!1,null,"5f2191a8",null),G=F.exports;O()(F,"components",{QScrollArea:L["a"],QCard:b["a"],QCardSection:P["a"],QInput:g["a"],QItemLabel:N["a"],QBtn:I["a"],QInnerLoading:q["a"],QLinearProgress:R["a"]});var V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-scroll-area",{staticClass:"full-height full-width"},[s("div",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col text-h5"},[e._v(e._s(e.$t("MAILWEBCLIENT.HEADING_SETTINGS_TAB")))])]),s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("div",{staticClass:"q-my-sm"},[e._v("\n              "+e._s(e.$t("MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT"))+"\n            ")])]),s("div",{staticClass:"col-4"},[s("div",{staticClass:"row"},[s("q-input",{staticClass:"col-4",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.userSpaceLimitMb,callback:function(t){e.userSpaceLimitMb=t},expression:"userSpaceLimitMb"}}),s("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1"})],1)])])])],1),s("div",{staticClass:"q-pt-md text-right"},[s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:e.updateSettingsForEntity}})],1)],1),s("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.saving}},[s("q-linear-progress",{attrs:{query:""}})],1)],1)},H=[],Q=s("11cb"),Y={name:"MailAdminSettingsPerUser",data:function(){return{user:null,userSpaceLimitMb:0,loading:!1,saving:!1}},watch:{$route:function(e,t){this.parseRoute()}},mounted:function(){this.parseRoute()},beforeRouteLeave:function(e,t,s){this.doBeforeRouteLeave(e,t,s)},methods:{hasChanges:function(){var e,t,s=c.a.isFunction(null===(e=this.user)||void 0===e?void 0:e.getData)?null===(t=this.user)||void 0===t?void 0:t.getData("Mail::UserSpaceLimitMb"):0;return this.userSpaceLimitMb!==s},revertChanges:function(){var e,t,s=c.a.isFunction(null===(e=this.user)||void 0===e?void 0:e.getData)?null===(t=this.user)||void 0===t?void 0:t.getData("Mail::UserSpaceLimitMb"):0;this.userSpaceLimitMb=s},parseRoute:function(){var e,t,s,a=p["a"].pPositiveInt(null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.id);(null===(s=this.user)||void 0===s?void 0:s.id)!==a&&(this.user={id:a},this.populate())},populate:function(){var e=this;this.loading=!0;var t=this.$store.getters["tenants/getCurrentTenantId"];Q["a"].getUser(t,this.user.id).then((function(t){var s=t.user,a=t.userId;a===e.user.id&&(e.loading=!1,s&&c.a.isFunction(null===s||void 0===s?void 0:s.getData)?(e.user=s,e.userSpaceLimitMb=s.getData("Mail::UserSpaceLimitMb")):e.$emit("no-user-found"))}))},updateSettingsForEntity:function(){var e=this;if(!this.saving){var t;this.saving=!0;var s={Type:"User",UserId:null===(t=this.user)||void 0===t?void 0:t.id,TenantId:this.user.tenantId,UserSpaceLimitMb:p["a"].pInt(this.userSpaceLimitMb)};d["a"].sendRequest({moduleName:"Mail",methodName:"UpdateEntitySpaceLimits",parameters:s}).then((function(t){e.saving=!1,t?(Q["a"].getUser(s.TenantId,s.EntityId).then((function(t){var a=t.user;a.updateData([{field:"Mail::UserSpaceLimitMb",value:s.UserSpaceLimitMb}]),e.populate()})),m["a"].showReport(e.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):m["a"].showError(e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(t){e.saving=!1,m["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}}},j=Y,J=Object(A["a"])(j,V,H,!1,null,null,null),X=J.exports;O()(J,"components",{QScrollArea:L["a"],QCard:b["a"],QCardSection:P["a"],QInput:g["a"],QBtn:I["a"],QInnerLoading:q["a"],QLinearProgress:R["a"]});t["default"]={moduleName:"MailWebclient",requiredModules:["Mail"],init:function(e){a["a"].init(e)},getAdminSystemTabs:function(){return[{tabName:"mail",tabTitle:"MAILWEBCLIENT.LABEL_SETTINGS_TAB",tabRouteChildren:[{path:"mail",component:function(){return s.e(38).then(s.bind(null,"80c3"))}}]},{tabName:"mail-servers",tabTitle:"MAILWEBCLIENT.LABEL_SERVERS_SETTINGS_TAB",tabRouteChildren:[{path:"mail-servers",component:U},{path:"mail-servers/id/:id",component:U},{path:"mail-servers/create",component:U},{path:"mail-servers/search/:search",component:U},{path:"mail-servers/search/:search/id/:id",component:U},{path:"mail-servers/page/:page",component:U},{path:"mail-servers/page/:page/id/:id",component:U},{path:"mail-servers/search/:search/page/:page",component:U},{path:"mail-servers/search/:search/page/:page/id/:id",component:U}]}]},getAdminUserTabs:function(){return a["a"].getAllowChangeMailQuotaOnMailServer()?[{tabName:"mail-quota",tabTitle:"MAILWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"id/:id/mail-quota",component:X},{path:"search/:search/id/:id/mail-quota",component:X},{path:"page/:page/id/:id/mail-quota",component:X},{path:"search/:search/page/:page/id/:id/mail-quota",component:X}]}]:[]},getAdminTenantTabs:function(){var e=i["a"].getters["user/isUserSuperAdmin"];return e?[{tabName:"mail-quota",tabTitle:"MAILWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"id/:id/mail-quota",component:G},{path:"search/:search/id/:id/mail-quota",component:G},{path:"page/:page/id/:id/mail-quota",component:G},{path:"search/:search/page/:page/id/:id/mail-quota",component:G}]}]:[]}}}}]);