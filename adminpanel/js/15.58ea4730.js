(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{b425:function(t,e,i){"use strict";i.r(e);i("c7fe"),i("3119"),i("8da0"),i("b5bb"),i("a2b7");var a=i("be6f"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-scroll-area",{staticClass:"full-height full-width"},[i("div",{staticClass:"q-pa-lg"},[i("div",{staticClass:"row q-mb-md"},[i("div",{directives:[{name:"t",rawName:"v-t",value:"FILESWEBCLIENT.HEADING_SETTINGS_TAB_PERSONAL",expression:"'FILESWEBCLIENT.HEADING_SETTINGS_TAB_PERSONAL'"}],staticClass:"col text-h5"})]),i("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[i("q-card-section",[i("div",{staticClass:"row q-mb-sm"},[i("div",{staticClass:"col-2"},[i("div",{staticClass:"q-my-sm"},[t._v("\n              "+t._s(t.$t("FILESWEBCLIENT.LABEL_TENANT_SPACE_LIMIT"))+"\n            ")])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-5",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:t.tenantSpaceLimitMb,callback:function(e){t.tenantSpaceLimitMb=e},expression:"tenantSpaceLimitMb"}}),i("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1",staticStyle:{"margin-top":"10px"}})],1)])]),i("div",{staticClass:"row q-mb-sm"},[i("div",{staticClass:"col-2"}),i("div",{staticClass:"col-8 q-mb-sm"},[i("q-item-label",{attrs:{caption:""}},[t._v("\n              "+t._s(t.$t("FILESWEBCLIENT.HINT_TENANT_SPACE_LIMIT"))+"\n            ")])],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("div",{staticClass:"q-my-sm"},[t._v("\n              "+t._s(t.$t("FILESWEBCLIENT.LABEL_USER_SPACE_LIMIT"))+"\n            ")])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-5",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:t.userSpaceLimitMb,callback:function(e){t.userSpaceLimitMb=e},expression:"userSpaceLimitMb"}}),i("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1",staticStyle:{"margin-top":"10px"}})],1)])]),i("div",{staticClass:"row q-mb-sm"},[i("div",{staticClass:"col-2"}),i("div",{staticClass:"col-8 q-my-sm"},[i("q-item-label",{attrs:{caption:""}},[t._v("\n              "+t._s(t.$t("FILESWEBCLIENT.HINT_USER_SPACE_LIMIT"))+"\n            ")])],1)]),i("div",{staticClass:"row"},[i("div",{directives:[{name:"t",rawName:"v-t",value:"FILESWEBCLIENT.LABEL_ALLOCATED_SPACE",expression:"'FILESWEBCLIENT.LABEL_ALLOCATED_SPACE'"}],staticClass:"col-2"}),i("div",{staticClass:"col-4"},[i("span",[t._v(t._s(t.allocatedSpace))]),i("span",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-mx-sm q-pb-sm col-1"})])])])],1),i("div",{staticClass:"q-pt-md text-right"},[i("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:t.save}})],1)],1),i("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:t.loading||t.saving}},[i("q-linear-progress",{attrs:{query:""}})],1)],1)},n=[],o=i("4245"),l=i("21ac"),r=i("6bfe"),c=i("e539"),p={name:"FilesAdminSettingsPerTenant",data:function(){return{saving:!1,loading:!1,tenantSpaceLimitMb:"",userSpaceLimitMb:"",allocatedSpace:"",tenant:null}},computed:{tenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenants:function(){return this.$store.getters["tenants/getTenants"]}},watch:{allTenants:function(){this.populate()}},beforeRouteLeave:function(t,e,i){this.doBeforeRouteLeave(t,e,i)},mounted:function(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges:function(){var t;if(this.loading)return!1;var e=r["a"].pObject(null===(t=this.tenant)||void 0===t?void 0:t.completeData),i=e["FilesWebclient::TenantSpaceLimitMb"],a=e["FilesWebclient::UserSpaceLimitMb"];return r["a"].pInt(this.tenantSpaceLimitMb)!==i||r["a"].pInt(this.userSpaceLimitMb)!==a},revertChanges:function(){var t,e=r["a"].pObject(null===(t=this.tenant)||void 0===t?void 0:t.completeData);this.tenantSpaceLimitMb=e["FilesWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=e["FilesWebclient::UserSpaceLimitMb"]},populate:function(){var t=this.$store.getters["tenants/getTenant"](this.tenantId);t&&(void 0!==t.completeData["FilesWebclient::TenantSpaceLimitMb"]?(this.tenant=t,this.tenantSpaceLimitMb=t.completeData["FilesWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=t.completeData["FilesWebclient::UserSpaceLimitMb"],this.allocatedSpace=t.completeData["FilesWebclient::AllocatedSpace"]):this.getSettings())},save:function(){var t=this;if(!this.saving){this.saving=!0;var e={EntityType:"Tenant",EntityId:this.tenantId,TenantId:this.tenantId,UserSpaceLimitMb:r["a"].pInt(this.userSpaceLimitMb),TenantSpaceLimitMb:r["a"].pInt(this.tenantSpaceLimitMb)};c["a"].sendRequest({moduleName:"Files",methodName:"UpdateSettingsForEntity",parameters:e}).then((function(i){if(t.saving=!1,i){var a={"FilesWebclient::UserSpaceLimitMb":e.UserSpaceLimitMb,"FilesWebclient::TenantSpaceLimitMb":e.TenantSpaceLimitMb,"FilesWebclient::AllocatedSpace":t.allocatedSpace};t.$store.commit("tenants/setTenantCompleteData",{id:t.tenantId,data:a}),l["a"].showReport(t.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else l["a"].showError(t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(e){t.saving=!1,l["a"].showError(o["a"].getTextFromResponse(e,t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings:function(){var t=this;this.loading=!0;var e={EntityType:"Tenant",EntityId:this.tenantId};c["a"].sendRequest({moduleName:"Files",methodName:"GetSettingsForEntity",parameters:e}).then((function(e){if(t.loading=!1,e){var i={"FilesWebclient::UserSpaceLimitMb":r["a"].pInt(e.UserSpaceLimitMb),"FilesWebclient::TenantSpaceLimitMb":r["a"].pInt(e.TenantSpaceLimitMb),"FilesWebclient::AllocatedSpace":r["a"].pInt(e.AllocatedSpace)};t.$store.commit("tenants/setTenantCompleteData",{id:t.tenantId,data:i})}}),(function(t){l["a"].showError(o["a"].getTextFromResponse(t))}))}}},d=p,u=i("2877"),m=i("4983"),E=i("f09f"),S=i("a370"),L=i("27f9"),b=i("0170"),v=i("9c40"),h=i("74f7"),C=i("6b1d"),I=i("eebe"),T=i.n(I),g=Object(u["a"])(d,s,n,!1,null,"4263b167",null),f=g.exports;T()(g,"components",{QScrollArea:m["a"],QCard:E["a"],QCardSection:S["a"],QInput:L["a"],QItemLabel:b["a"],QBtn:v["a"],QInnerLoading:h["a"],QLinearProgress:C["a"]});var M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-scroll-area",{staticClass:"full-height full-width"},[i("div",{staticClass:"q-pa-lg"},[i("div",{staticClass:"row q-mb-md"},[i("div",{staticClass:"col text-h5"},[t._v(t._s(t.$t("FILESWEBCLIENT.HEADING_SETTINGS_TAB_PERSONAL")))])]),i("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[i("q-card-section",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("div",{staticClass:"q-my-sm"},[t._v("\n              "+t._s(t.$t("FILESWEBCLIENT.LABEL_USER_SPACE_LIMIT"))+"\n            ")])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-4",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:t.userSpaceLimitMb,callback:function(e){t.userSpaceLimitMb=e},expression:"userSpaceLimitMb"}}),i("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1"})],1)])])])],1),i("div",{staticClass:"q-pt-md text-right"},[i("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:t.updateSettingsForEntity}})],1)],1),i("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:t.loading||t.saving}},[i("q-linear-progress",{attrs:{query:""}})],1)],1)},N=[],_=i("b2f5"),A=i.n(_),F=i("11cb"),B={name:"FilesAdminSettingsPerUser",data:function(){return{user:null,userSpaceLimitMb:0,loading:!1,saving:!1}},watch:{$route:function(t,e){this.parseRoute()}},mounted:function(){this.parseRoute()},beforeRouteLeave:function(t,e,i){this.doBeforeRouteLeave(t,e,i)},methods:{parseRoute:function(){var t,e,i,a=r["a"].pPositiveInt(null===(t=this.$route)||void 0===t||null===(e=t.params)||void 0===e?void 0:e.id);(null===(i=this.user)||void 0===i?void 0:i.id)!==a&&(this.user={id:a},this.populate())},populate:function(){var t=this;this.loading=!0;var e=this.$store.getters["tenants/getCurrentTenantId"];F["a"].getUser(e,this.user.id).then((function(e){var i=e.user,a=e.userId;a===t.user.id&&(t.loading=!1,i&&A.a.isFunction(null===i||void 0===i?void 0:i.getData)?(t.user=i,t.userSpaceLimitMb=r["a"].pInt(i.getData("Files::UserSpaceLimitMb"))):t.$emit("no-user-found"))}))},hasChanges:function(){var t,e,i=A.a.isFunction(null===(t=this.user)||void 0===t?void 0:t.getData)?r["a"].pInt(null===(e=this.user)||void 0===e?void 0:e.getData("Files::UserSpaceLimitMb")):0;return this.userSpaceLimitMb!==i},revertChanges:function(){var t,e,i=A.a.isFunction(null===(t=this.user)||void 0===t?void 0:t.getData)?r["a"].pInt(null===(e=this.user)||void 0===e?void 0:e.getData("Files::UserSpaceLimitMb")):0;this.userSpaceLimitMb=i},updateSettingsForEntity:function(){var t,e=this;this.saving=!0;var i={EntityType:"User",EntityId:null===(t=this.user)||void 0===t?void 0:t.id,TenantId:this.user.tenantId,UserSpaceLimitMb:this.userSpaceLimitMb};c["a"].sendRequest({moduleName:"Files",methodName:"UpdateSettingsForEntity",parameters:i}).then((function(t){e.saving=!1,t?(F["a"].getUser(i.TenantId,i.EntityId).then((function(t){var a=t.user;a.updateData([{field:"Files::UserSpaceLimitMb",value:i.UserSpaceLimitMb}]),e.populate()})),l["a"].showReport(e.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):l["a"].showError(e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(t){e.saving=!1,l["a"].showError(o["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}},R=B,W=Object(u["a"])(R,M,N,!1,null,"401b166b",null),q=W.exports;T()(W,"components",{QScrollArea:m["a"],QCard:E["a"],QCardSection:S["a"],QInput:L["a"],QBtn:v["a"],QInnerLoading:h["a"],QLinearProgress:C["a"]});e["default"]={moduleName:"FilesWebclient",requiredModules:["Files"],init:function(t){a["a"].init(t)},getAdminSystemTabs:function(){return[{tabName:"files",tabTitle:"FILESWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"files",component:function(){return i.e(34).then(i.bind(null,"b494"))}}]}]},getAdminUserTabs:function(){return[{tabName:"files",tabTitle:"FILESWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"id/:id/files",component:q},{path:"search/:search/id/:id/files",component:q},{path:"page/:page/id/:id/files",component:q},{path:"search/:search/page/:page/id/:id/files",component:q}]}]},getAdminTenantTabs:function(){return[{tabName:"files",tabTitle:"FILESWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"id/:id/files",component:f},{path:"search/:search/id/:id/files",component:f},{path:"page/:page/id/:id/files",component:f},{path:"search/:search/page/:page/id/:id/files",component:f}]}]}}},be6f:function(t,e,i){"use strict";var a=i("970b"),s=i.n(a),n=i("5bc3"),o=i.n(n),l=(i("b2f5"),i("6bfe")),r=function(){function t(e){s()(this,t);var i=l["a"].pObject(e.Files),a=l["a"].pObject(e.CorporateFiles);this.enableUploadSizeLimit=l["a"].pBool(i.EnableUploadSizeLimit),this.uploadSizeLimitMb=l["a"].pNonNegativeInt(i.UploadSizeLimitMb),this.userSpaceLimitMb=l["a"].pNonNegativeInt(i.UserSpaceLimitMb),this.tenantSpaceLimitMb=l["a"].pNonNegativeInt(i.TenantSpaceLimitMb),this.showCorporateFilesAdminSection=!0,this.corporateSpaceLimitMb=l["a"].pNonNegativeInt(a.SpaceLimitMb)}return o()(t,[{key:"saveFilesSettings",value:function(t){var e=t.enableUploadSizeLimit,i=t.uploadSizeLimitMb,a=t.userSpaceLimitMb;this.enableUploadSizeLimit=e,this.uploadSizeLimitMb=i,this.userSpaceLimitMb=a}},{key:"savePersonalFilesSettings",value:function(t){var e=t.tenantSpaceLimitMb,i=t.userSpaceLimitMb;this.tenantSpaceLimitMb=e,this.userSpaceLimitMb=i}},{key:"saveCorporateFilesSettings",value:function(t){var e=t.spaceLimitMb;this.corporateSpaceLimitMb=e}}]),t}(),c=null;e["a"]={init:function(t){c=new r(t)},getFilesSettings:function(){return{enableUploadSizeLimit:c.enableUploadSizeLimit,uploadSizeLimitMb:c.uploadSizeLimitMb,tenantSpaceLimitMb:c.tenantSpaceLimitMb,userSpaceLimitMb:c.userSpaceLimitMb,corporateSpaceLimitMb:c.corporateSpaceLimitMb}},saveFilesSettings:function(t){c.saveFilesSettings(t)},savePersonalFilesSettings:function(t){c.savePersonalFilesSettings(t)},saveCorporateFilesSettings:function(t){c.saveCorporateFilesSettings(t)}}}}]);