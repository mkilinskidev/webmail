(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"5hOJ":function(t,e,i){"use strict";var o=i("wd/R"),s=i("RN+F"),r=i("Yjhd"),n=i("hPb3");function h(){this.iTimeStampInUTC=0,this.oMoment=null}h.prototype.parse=function(t){this.iTimeStampInUTC=t,this.oMoment=o.unix(this.iTimeStampInUTC)},h.prototype.setDate=function(t,e,i){this.oMoment=o([t,e,i])},h.prototype.getTimeFormat=function(){return n.timeFormat()===window.Enums.TimeFormat.F24?"HH:mm":"hh:mm A"},h.prototype.getFullDate=function(){return this.getDate()+" "+this.getTime()},h.prototype.getMidDate=function(){return this.getShortDate(!0)},h.prototype.getShortDate=function(t){var e="",i=null;return this.oMoment&&((i=o()).format("L")===this.oMoment.format("L")?e=this.oMoment.format(this.getTimeFormat()):(e=i.clone().subtract(1,"days").format("L")===this.oMoment.format("L")?s.i18n("COREWEBCLIENT/LABEL_YESTERDAY"):n.UserSelectsDateFormat?this.oMoment.format(r.getDateFormatForMoment(n.dateFormat())):i.year()===this.oMoment.year()?this.oMoment.format("MMM D"):this.oMoment.format("MMM D, YYYY"),t&&(e+=", "+this.oMoment.format(this.getTimeFormat())))),e},h.prototype.getDate=function(){var t="ddd, MMM D, YYYY";return n.UserSelectsDateFormat&&(t="ddd, "+r.getDateFormatForMoment(n.dateFormat())),this.oMoment?this.oMoment.format(t):""},h.prototype.getTime=function(){return this.oMoment?this.oMoment.format(this.getTimeFormat()):""},h.prototype.getTimeStampInUTC=function(){return this.iTimeStampInUTC},t.exports=h},"8UTp":function(t,e,i){"use strict";var o=i("xG9w"),s=i("0h2I"),r=(i("wd/R"),i("RN+F")),n=i("o0Bx"),h=i("JFZZ"),a=i("czxF"),u=i("5hOJ"),c=i("fIp0"),p=i("SQrT"),g=i("76Kh"),m=i("20Ah");function f(){a.call(this),this.popupHeading=s.observable(""),this.item=null,this.historyItems=s.observableArray([]),this.isLoading=s.observable(!0),this.isEmptyHistory=s.computed((function(){return!this.isLoading()&&0===this.historyItems().length}),this),this.iEventsPerPage=10,this.oPageSwitcher=new c(0,this.iEventsPerPage),this.oPageSwitcher.currentPage.subscribe((function(){this.requestEvents()}),this),this.iCurrentPage=0}o.extendOwn(f.prototype,a.prototype),f.prototype.PopupTemplate="ActivityHistory_ShowHistoryPopup",f.prototype.onOpen=function(t,e){this.item=e,this.popupHeading(t),this.historyItems([]),this.isLoading(!0),this.oPageSwitcher.setPage(1,this.iEventsPerPage),this.requestEvents()},f.prototype.requestEvents=function(){n.send("ActivityHistory","GetList",{ResourceType:"file",ResourceId:this.item.storageType()+this.item.fullPath(),Offset:(this.oPageSwitcher.currentPage()-1)*this.iEventsPerPage,Limit:this.iEventsPerPage},this.onGetActivityHistory,this)},f.prototype.onGetActivityHistory=function(t,e){if(t.Result&&o.isArray(t.Result.Items)){var i=[];o.each(t.Result.Items,(function(t){var e=new u;e.parse(t.Timestamp),i.push({time:e.getFullDate(),action:t.Action,userPublicId:t.GuestPublicId,ip:t.IpAddress})})),this.historyItems(i),this.oPageSwitcher.setCount(t.Result.Count)}else h.showErrorByCode(t,r.i18n("ACTIVITYHISTORY/ERROR_GET_HISTORY"));this.isLoading(!1)},f.prototype.confirmClearHistory=function(){g.showPopup(m,[r.i18n("ACTIVITYHISTORY/CONFIRM_CLEAR_HISTORY"),o.bind((function(t){t&&this.clearHistory()}),this),"",r.i18n("ACTIVITYHISTORY/ACTION_CLEAR_HISTORY")])},f.prototype.clearHistory=function(){n.send("ActivityHistory","Delete",{ResourceType:"file",ResourceId:this.item.storageType()+this.item.fullPath()},this.onDeleteActivityHistory,this)},f.prototype.onDeleteActivityHistory=function(t,e){t.Result?(this.historyItems([]),this.oPageSwitcher.setCount(0),p.showReport(r.i18n("ACTIVITYHISTORY/REPORT_CLEAR_HISTORY"))):h.showErrorByCode(t,r.i18n("ACTIVITYHISTORY/ERROR_CLEAR_HISTORY")),this.isLoading(!1)},t.exports=new f},ELDR:function(t,e,i){"use strict";t.exports=function(t){return{getShowHistoryPopup:function(){return i("8UTp")}}}},fIp0:function(t,e,i){"use strict";var o=i("xG9w"),s=i("EVdn"),r=i("0h2I"),n=i("Yjhd"),h=i("IAk5");function a(t,e){this.bShown=!1,this.currentPage=r.observable(1),this.count=r.observable(t),this.perPage=r.observable(e),this.firstPage=r.observable(1),this.lastPage=r.observable(1),this.pagesCount=r.computed((function(){var t=this.perPage()>0?Math.ceil(this.count()/this.perPage()):0;return t>0?t:1}),this),r.computed((function(){var t=20,e=4,i=this.pagesCount(),o=this.currentPage(),s=o,r=o;if(i>1)for(;t--,1<s&&(s--,e--),0!==e&&(i>r&&(r++,e--),0!==e)&&0!==t;);this.firstPage(s),this.lastPage(r)}),this),this.visibleFirst=r.computed((function(){return this.firstPage()>1}),this),this.visibleLast=r.computed((function(){return this.lastPage()<this.pagesCount()}),this),this.clickPage=o.bind(this.clickPage,this),this.pages=r.computed((function(){var t=this.firstPage(),e=[];if(this.firstPage()<this.lastPage())for(;t<=this.lastPage();t++)e.push({number:t,current:t===this.currentPage(),clickFunc:this.clickPage});return e}),this),h.isMobile()||this.hotKeysBind()}a.prototype.ViewTemplate="CoreWebclient_PageSwitcherView",a.prototype.hotKeysBind=function(){s(document).on("keydown",s.proxy((function(t){if(this.bShown&&!n.isTextFieldFocused()){var e=t.keyCode;t.ctrlKey&&e===Enums.Key.Left?this.clickPreviousPage():t.ctrlKey&&e===Enums.Key.Right&&this.clickNextPage()}}),this))},a.prototype.hide=function(){this.bShown=!1},a.prototype.show=function(){this.bShown=!0},a.prototype.clear=function(){this.currentPage(1),this.count(0)},a.prototype.setCount=function(t){this.count(t),this.currentPage()>this.pagesCount()&&this.currentPage(this.pagesCount())},a.prototype.setPage=function(t,e){this.perPage(e),t>this.pagesCount()?this.currentPage(this.pagesCount()):this.currentPage(t)},a.prototype.clickPage=function(t){var e=t.number;e<1&&(e=1),e>this.pagesCount()&&(e=this.pagesCount()),this.currentPage(e)},a.prototype.clickFirstPage=function(){this.currentPage(1)},a.prototype.clickPreviousPage=function(){var t=this.currentPage()-1;t<1&&(t=1),this.currentPage(t)},a.prototype.clickNextPage=function(){var t=this.currentPage()+1;t>this.pagesCount()&&(t=this.pagesCount()),this.currentPage(t)},a.prototype.clickLastPage=function(){this.currentPage(this.pagesCount())},t.exports=a}}]);